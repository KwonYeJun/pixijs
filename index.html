<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <script src="https://pixijs.download/release/pixi.min.js"></script>
</head>

<body>
  <script>
    // Create the application helper and add its render target to the page
    let app = new PIXI.Application({ width: 640, height: 360 });
    document.body.appendChild(app.view);

    // Create the sprite and add it to the stage
    let sprite = PIXI.Sprite.from('sample.png');
    app.stage.addChild(sprite);

    // Add a ticker callback to move the sprite back and forth
    let elapsed = 0.0;
    app.ticker.add((delta) => {
      elapsed += delta;
      sprite.x = 100.0 + Math.cos(elapsed / 50.0) * 100.0;
    });

    let characterTexture = PIXI.Texture.from('test.png'); // 캐릭터 이미지 로드
    let character = new PIXI.Sprite(characterTexture); // 스프라이트 생성
    app.stage.addChild(character); // 스프라이트를 화면에 추가

    let characterSpeed = 2; // 캐릭터의 이동 속도

    app.ticker.add((delta) => {
      // delta는 프레임 간 시간 간격을 나타냅니다.
      character.x += characterSpeed * delta; // 캐릭터를 이동시킴

      // 화면을 벗어나면 반대 방향으로 이동
      if (character.x > app.renderer.width) {
        characterSpeed = -2;
      } else if (character.x < 0) {
        characterSpeed = 2;
      }
    });

  // 방향키 코드 정의
const LEFT_KEY = 37;
const RIGHT_KEY = 39;
const TOP_KEY = 38;
const DOWN_KEY = 40;

// 이동 속도 초기화
let characterSpeedX = 0;
let characterSpeedY = 0;

// 키보드 이벤트 리스너 추가
document.addEventListener('keydown', (event) => {
  if (event.keyCode === LEFT_KEY) {
    characterSpeedX = -2; // 왼쪽 화살표 키를 누르면 왼쪽으로 이동
  } else if (event.keyCode === RIGHT_KEY) {
    characterSpeedX = 2; // 오른쪽 화살표 키를 누르면 오른쪽으로 이동
  } else if (event.keyCode === TOP_KEY) {
    characterSpeedY = -2; // 위쪽 화살표 키를 누르면 위로 이동
  } else if (event.keyCode === DOWN_KEY) {
    characterSpeedY = 2; // 아래쪽 화살표 키를 누르면 아래로 이동
  }
});

// 키를 놓을 때 멈추도록 이벤트 리스너 추가
document.addEventListener('keyup', (event) => {
  if (event.keyCode === LEFT_KEY || event.keyCode === RIGHT_KEY) {
    characterSpeedX = 0; // 좌우 화살표 키를 놓으면 X 축 이동 멈춤
  } else if (event.keyCode === TOP_KEY || event.keyCode === DOWN_KEY) {
    characterSpeedY = 0; // 상하 화살표 키를 놓으면 Y 축 이동 멈춤
  }
});

app.ticker.add((delta) => {
  // delta는 프레임 간 시간 간격을 나타냅니다.
  character.x += characterSpeedX * delta; // X 축으로 이동
  character.y += characterSpeedY * delta; // Y 축으로 이동
});





    // 터치 이벤트 리스너 추가
    app.view.addEventListener('touchstart', (event) => {
      const touchX = event.touches[0].clientX; // 터치한 위치의 X 좌표
      const characterX = character.x; // 현재 캐릭터의 X 좌표

      if (touchX < characterX) {
        characterSpeed = -2; // 터치한 위치가 캐릭터 왼쪽에 있으면 왼쪽으로 이동
      } else if (touchX > characterX) {
        characterSpeed = 2; // 터치한 위치가 캐릭터 오른쪽에 있으면 오른쪽으로 이동
      }
    });

    // 터치를 놓을 때 멈추도록 이벤트 리스너 추가
    app.view.addEventListener('touchend', () => {
      characterSpeed = 0; // 터치를 놓으면 멈춤
    });


  </script>
</body>

</html>